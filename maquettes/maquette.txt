================================================================================
          E-PARFUME - DOSSIER D'EXPLOITATION TECHNIQUE & ARCHITECTURE
================================================================================

1. ARCHITECTURE SYSTÈME : MODÈLE DÉCOUPLÉ (DECOUPLED ARCHITECTURE)
------------------------------------------------------------------

      ┌────────────────────────┐          ┌────────────────────────┐
      │    FRONTEND (React)    │          │    BACKEND (Node.js)   │
      │    Hébergé sur Vercel  │          │    Hébergé sur Render  │
      └───────────┬────────────┘          └───────────┬────────────┘
                  │                                   │
                  │        REQUÊTES API (HTTPS)       │
                  ├──────────────────────────────────▶│
                  │  - Method: GET/POST/PUT/DELETE    │
                  │  - Authorization: Bearer <JWT>    │
                  │  - Body: JSON (Payload métier)    │
                  │                                   │
                  │        RÉPONSES API (JSON)        │
                  │◀──────────────────────────────────┤
                  │  - Status Codes: 200/201/400/404  │
                  │  - Payload: Données / Error Msg   │
                  │                                   │
      ┌───────────▼────────────┐          ┌───────────▼────────────┐
      │    PERSISTANCE CLIENT  │          │    PERSISTANCE SERVEUR │
      │    (LocalStorage)      │          │    (MongoDB Atlas)     │
      │    - Cart (State Sync) │          │    - Document Storage  │
      │    - JWT (Exp: 30d)    │          │    - Mongoose Schemas  │
      │    - DarkMode Preference│          │    - Database Clusters │
      └────────────────────────┘          └────────────────────────┘


2. ANALYSE STRUCTURELLE DU CODE (MICRO-GESTION DES RESPONSABILITÉS)
-------------------------------------------------------------------

   /CLIENT (Frontend - Architecture Modulaire)
   ├── /src/context  --> STATE MANAGEMENT : Context API pour l'état global. 
   │                     Évite le surcoût de Redux sur ce périmètre.
   ├── /src/screens  --> VIEWS : Composants de pages gérant les cycles de vie 
   │                     React (Mounting/Updating) et les hooks (useEffect).
   ├── /src/schemas  --> DATA INTEGRITY : Schémas Zod pour le "Fail-Fast" 
   │                     (rejeter les données invalides avant l'envoi).
   ├── /src/utils    --> HELPERS : Fonctions de calcul (TVA, Frais de port) 
   │                     et manipulation de chaînes (Formatage prix).
   └── /src/comp     --> COMPONENTS : Architecture atomique pour la réutilisabilité.

   /SERVER (Backend - Architecture Middleware-Driven)
   ├── /models       --> DATA ACCESS LAYER : Contraintes MongoDB via Mongoose.
   ├── /controllers  --> BUSINESS LOGIC : Cœur de l'application. Reçoit les 
   │                     données, traite les règles et renvoie les réponses.
   ├── /routes       --> ROUTING : Définition des ressources REST (Endpoints).
   └── /middleware   --> SECURITY LAYER : Vérification JWT, AdminGuard et 
                         centralisation des erreurs (ErrorMiddleware).


3. MODÉLISATION DES DONNÉES & COHÉRENCE MÉTIER
----------------------------------------------

   COLLECTION: PRODUCTS             COLLECTION: ORDERS (Audit & Traçabilité)
   ┌──────────────────────┐         ┌──────────────────────────────────────┐
   │ - Schema Strict      │         │ - Relation: Ref User (ObjectId)      │
   │ - Fragrance Notes    │         │ - Items: Snapshot Dénormalisé        │
   │ - Category / Brand   │         │   (Prix figé à l'achat pour facture) │
   │ - Stock (Atomic Upd) │         │ - Financement: Stripe/PayPal IDs     │
   └──────────────────────┘         └──────────────────────────────────────┘
   Logique : Les produits sont liés aux commentaires via une collection séparée
   pour optimiser les performances de lecture (Query Optimization).


4. SÉCURITÉ APPLICATIVE & FLUX FINANCIER
----------------------------------------

   A. AUTHENTIFICATION & INTÉGRITÉ : 
      - Session : JWT (JSON Web Token) signé. Architecture Stateless.
      - Passwords : Algorithme Bcrypt (Salt Rounds: 10). Protection unidirectionnelle.
      - Anti-Spam : reCAPTCHA v3 avec vérification asynchrone côté serveur.

   B. FLUX TRANSACTIONNEL (ZERO-TRUST) :
      - Sécurité : Tout calcul de prix fait côté client est ignoré. 
        Le serveur recalcule le total à partir de la DB (Anti-fraude).
      - Récupération : En cas d'échec réseau, utilisation de Webhooks pour 
        assurer la mise à jour asynchrone du statut de paiement.

   C. SANITIZATION & PROTECTION :
      - NoSQL Injection : Prévention par typage strict via Mongoose.
      - XSS : Filtrage natif React et Headers de sécurité via Helmet.


5. INFRASTRUCTURE & SERVICES EXTERNES
--------------------------------------

   - CLOUDINARY : Gestionnaire de médias avec compression automatique (CDN).
   - VERCEL : CI/CD avec build automatique à chaque 'git push'.
   - RENDER : Monitoring des logs et gestion des variables d'env sécurisées.
   - MONGODB ATLAS : Gestion des clusters avec sauvegardes automatiques.

================================================================================
                       CONCEPTION & RÉALISATION : 2026
================================================================================